From: =?utf-8?q?Daniel_K=C3=B6b?= <daniel.koeb@peony.at>
Date: Mon, 29 May 2017 19:17:54 +0200
Subject: Handle gphoto2 mounts that give an exception on retreiving Uri.

Fixes https://github.com/mono/f-spot/issues/84
---
 src/Clients/FSpot/FSpot.Import/ImportDialogController.cs | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/Clients/FSpot/FSpot.Import/ImportDialogController.cs b/src/Clients/FSpot/FSpot.Import/ImportDialogController.cs
index 6fb9a51..0263b4f 100644
--- a/src/Clients/FSpot/FSpot.Import/ImportDialogController.cs
+++ b/src/Clients/FSpot/FSpot.Import/ImportDialogController.cs
@@ -147,7 +147,12 @@ namespace FSpot.Import
 			var monitor = GLib.VolumeMonitor.Default;
 			var sources = new List<ImportSource> ();
 			foreach (var mount in monitor.Mounts) {
-				var root = new SafeUri (mount.Root.Uri);
+				SafeUri root;
+				if (mount.Root.UriScheme == "gphoto2") {
+					root = new SafeUri (mount.Root.Path);
+				} else {
+					root = new SafeUri (mount.Root.Uri);
+				}
 
 				var themed_icon = (mount.Icon as GLib.ThemedIcon);
 				if (themed_icon != null && themed_icon.Names.Length > 0) {
